<?xml version="1.0" encoding="GBK"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans default-autowire="byName">
	
	<bean id="terminator" class="com.taobao.terminator.client.TerminatorBean4Test" init-method="init" >
		<property name="serviceName" value="search4album" />
		<property name="zkAddress"   value="192.168.211.29:2181"/>
		<property name="fullCronExpression"   value="0 0/10 * * * ?"/>
		<property name="incrCronExpression"   value="0 0/1 * * * ?"/>
		<property name="startupTimerTask"         value="true"/>
	</bean>
	<bean name="groupRouter" class="com.taobao.terminator.client.router.ModGroupRouter">
		<property name="shardKey" value="id" />
	</bean>
		

	<!-- 数据源配置 -->
	<bean id="dataSource_1" class="org.springframework.jdbc.datasource.DriverManagerDataSource" destroy-method="close">
		<property name="driverClassName" value="com.mysql.jdbc.Driver" />
		<property name="url"             value="jdbc:mysql://192.168.205.89:3306/snsalbum?characterEncoding=GBK" />
		<property name="username"		 value="sns" />
		<property name="password" 		 value="sns" />
	</bean>
	<bean id="dataSource_2" class="org.springframework.jdbc.datasource.DriverManagerDataSource" destroy-method="close">
		<property name="driverClassName" value="com.mysql.jdbc.Driver" />
		<property name="url"             value="jdbc:mysql://192.168.205.89:3306/snsalbum?characterEncoding=GBK" />
		<property name="username"        value="sns" />
		<property name="password"    	 value="sns" />
	</bean>
	
	<!-- 全量数据导出Bean -->
	<bean id="fullMutltiTableDataProvider_1" class="com.taobao.terminator.client.index.data.FullMultiTableDataProvider" init-method="init">
		<property name="dataSource"     ref="dataSource_1"/>
		<property name="subtableDesc"   value="0-1"/>
		<property name="baseSql"        value="select id , album_id , status , inform_num , opt_id , opt_nick , user_id , user_nick , file_path , tags , memo ,  via_type  from picture$tablename$"/>
	</bean>
	<bean id="fullMutltiTableDataProvider_2" class="com.taobao.terminator.client.index.data.FullMultiTableDataProvider" init-method="init">
		<property name="dataSource"     ref="dataSource_2"/>
		<property name="subtableDesc"   value="0-1"/>
		<property name="baseSql"        value="select id , album_id , status , inform_num , opt_id , opt_nick , user_id , user_nick , file_path , tags , memo ,  via_type  from picture$tablename$"/>
	</bean>
	<bean id="fullDataProvider" class="com.taobao.terminator.client.index.data.MultiDBDataProvider">
		<property name="dataProviders">
			<list>
				<ref bean="fullMutltiTableDataProvider_1" />
				<ref bean="fullMutltiTableDataProvider_2" />
			</list>
		</property>
	</bean>

	<!-- 增量数据导出Bean -->
	<bean id="increMutltiTableDataProvider_1" class="com.taobao.terminator.client.index.data.FullMultiTableDataProvider" init-method="init">
		<property name="dataSource"     ref="dataSource_1"/>
		<property name="subtableDesc"   value="0-1"/>
		<property name="baseSql"        value="select id , album_id , status , inform_num , opt_id , opt_nick , user_id , user_nick , file_path , tags , memo ,  via_type from picture$tablename$"/>
		<!--<property name="dateColumnName" value="gmt_modified"/>
	--></bean>
	<bean id="increMutltiTableDataProvider_2" class="com.taobao.terminator.client.index.data.FullMultiTableDataProvider" init-method="init">
		<property name="dataSource"     ref="dataSource_2"/>
		<property name="subtableDesc"   value="0-1"/>
		<property name="baseSql"        value="select id , album_id , status , inform_num , opt_id , opt_nick , user_id , user_nick , file_path , tags , memo ,  via_type from picture$tablename$"/>
		<!--<property name="dateColumnName" value="gmt_modified"/>
	--></bean>
	<bean id="incrDataProvider" class="com.taobao.terminator.client.index.data.MultiDBDataProvider">
		<property name="dataProviders">
			<list>
				<ref bean="increMutltiTableDataProvider_1" />
				<ref bean="increMutltiTableDataProvider_2" />
			</list>
		</property>
	</bean>
</beans>