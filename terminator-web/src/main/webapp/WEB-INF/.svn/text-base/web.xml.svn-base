<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">

<!-- 
	Note:
	这个文件存在仅仅是为了能快速使用mvn jetty:run命令
	如果有修改内容请修改/terminator-web/src/main/resources/web/web.xml
	log4j.xml也是如此
 -->


<web-app>


	<context-param>
		<param-name>log4jConfigLocation</param-name>
		<param-value>WEB-INF/log4j.xml</param-value>
	</context-param>
	
	<listener>
		<listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
	</listener>
	
    <env-entry>
       <env-entry-name>solr/home</env-entry-name>
       <env-entry-value>d:/terminator_home</env-entry-value>
       <env-entry-type>java.lang.String</env-entry-type>
    </env-entry>
    
    <env-entry>
       <env-entry-name>zkconfig/path</env-entry-name>
       <env-entry-value>d:/terminator_home/zkconf.properties</env-entry-value>
       <env-entry-type>java.lang.String</env-entry-type>
    </env-entry>



  <filter>
    <filter-name>SolrRequestFilter</filter-name>
    <filter-class>com.taobao.terminator.web.XSolrDispatchFilter</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>SolrRequestFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <servlet>
    <servlet-name>SolrServer</servlet-name>
    <display-name>Solr</display-name>
    <description>Solr Server</description>
    <servlet-class>org.apache.solr.servlet.SolrServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet>
    <servlet-name>SolrUpdate</servlet-name>
    <display-name>SolrUpdate</display-name>
    <description>Solr Update Handler</description>
    <servlet-class>org.apache.solr.servlet.SolrUpdateServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
  </servlet>

  <servlet>
    <servlet-name>Logging</servlet-name>
    <servlet-class>org.apache.solr.servlet.LogLevelSelection</servlet-class>
  </servlet><!--
  
  	<servlet>
		<servlet-name>realTimeServlet</servlet-name>
		<servlet-class>com.taobao.terminator.web.perftest.RealTimeServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>realTimeServlet</servlet-name>
		<url-pattern>/realTime</url-pattern>
	</servlet-mapping>
  

  --><servlet>
    <servlet-name>ping</servlet-name>
    <jsp-file>/admin/ping.jsp</jsp-file>
  </servlet>
  
  <servlet>
  	<servlet-name>indexServlet</servlet-name>
  	<servlet-class>com.taobao.terminator.web.TerminatorIndexServlet</servlet-class>
  </servlet>
  
   <servlet>
  	<servlet-name>fullDumpServlet</servlet-name>
  	<servlet-class>com.taobao.terminator.web.FullDumpServlet</servlet-class>
  </servlet>
  
  <servlet>     
  	<servlet-name>statsServlet</servlet-name>
  	<servlet-class>com.taobao.terminator.web.RealTimeStatsServlet</servlet-class>
  </servlet>
  
  <servlet>     
  	<servlet-name>ipTestServlet</servlet-name>
	<servlet-class>com.taobao.terminator.web.perftest.IpFriendServlet</servlet-class>
  </servlet>
  
  
   <servlet-mapping>
  	<servlet-name>ipTestServlet</servlet-name>
    <url-pattern>/iptrigger</url-pattern>
  </servlet-mapping>
  
  <servlet-mapping>
  	<servlet-name>statsServlet</servlet-name>
    <url-pattern>/stats</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
  	<servlet-name>indexServlet</servlet-name>
    <url-pattern>/trigger</url-pattern>
  </servlet-mapping>
  
  <servlet-mapping>
  	<servlet-name>fullDumpServlet</servlet-name>
    <url-pattern>/trigger2</url-pattern>
  </servlet-mapping>
  
  <servlet-mapping>
    <servlet-name>SolrServer</servlet-name>
    <url-pattern>/select/*</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>SolrUpdate</servlet-name>
    <url-pattern>/update/*</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>Logging</servlet-name>
    <url-pattern>/admin/logging</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>ping</servlet-name>
    <url-pattern>/admin/ping</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>Logging</servlet-name>
    <url-pattern>/admin/logging.jsp</url-pattern>
  </servlet-mapping>
  
  <mime-mapping>
    <extension>.xsl</extension>
    <mime-type>application/xslt+xml</mime-type>
  </mime-mapping>

</web-app>
